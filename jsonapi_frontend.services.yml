services:
  jsonapi_frontend.path_resolver:
    class: Drupal\jsonapi_frontend\Service\PathResolver
    arguments:
      - '@entity_type.manager'
      - '@path_alias.manager'
      - '@path.validator'
      - '@language_manager'
      - '@module_handler'
      - '@config.factory'
      - '@request_stack'

  jsonapi_frontend.routes_feed_builder:
    class: Drupal\jsonapi_frontend\Service\RoutesFeedBuilder
    arguments:
      - '@entity_type.manager'
      - '@entity_type.bundle.info'
      - '@path_alias.manager'
      - '@language_manager'
      - '@module_handler'
      - '@config.factory'
      - '@account_switcher'
      - '@logger.channel.jsonapi_frontend'

  jsonapi_frontend.secret_manager:
    class: Drupal\jsonapi_frontend\Service\SecretManager
    arguments:
      - '@state'
      - '@config.factory'
      - '@config.storage'

  jsonapi_frontend.proxy_secret_subscriber:
    class: Drupal\jsonapi_frontend\EventSubscriber\ProxySecretSubscriber
    arguments:
      - '@config.factory'
      - '@jsonapi_frontend.secret_manager'
    tags:
      - { name: event_subscriber }

  jsonapi_frontend.revalidation_subscriber:
    class: Drupal\jsonapi_frontend\EventSubscriber\RevalidationSubscriber
    arguments:
      - '@config.factory'
      - '@jsonapi_frontend.secret_manager'
      - '@http_client'
      - '@logger.channel.jsonapi_frontend'
    tags:
      - { name: event_subscriber }

  logger.channel.jsonapi_frontend:
    parent: logger.channel_base
    arguments: ['jsonapi_frontend']
